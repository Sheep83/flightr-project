{"version":3,"sources":["webpack:///webpack/bootstrap e6d98a158f9fcd229886","webpack:///./src/index.js","webpack:///./src/map.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAkB;AAClB;AACA;AACA;;AAEA,iBAAgB;AAChB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAMA;AACA;;AAEA,kBAAiB,gCAAgC;AACjD,4BAA2B;AAC3B;AACA;AACA;AACA;;AAEA,oCAAmC;AACnC;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAiB,UAAU;AAC3B;AACA;AACA,2CAA0C;AAC1C;AACA,MAAK;AACL;AACA,2CAA0C;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,kBAAiB,+BAA+B;AAChD,gCAA+B;AAC/B;AACA;;AAEA,mCAAkC;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,E;;;;;;ACtLA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA,sB","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap e6d98a158f9fcd229886\n **/","var Map = require('./map');\nwindow.onload = function(){\n\n  var button = document.getElementById('button');\n  button.onclick = function(){\n    origin = document.getElementById('origin').value;\n    destination = document.getElementById('destination').value;\n    startDate = document.getElementById('start-date').value;\n    endDate = document.getElementById('end-date').value;\n    noRooms = document.getElementById('no-rooms');\n    noRoomsValue = noRooms.options[noRooms.selectedIndex].text;\n    sendOriginRequest();\n\n    var center = {lat: 55.9533, lng: -3.1883};\n    var map = new Map(center);\n    console.log(map);\n  }\n\n  var center = {lat: 55.9533, lng: -3.1883};\n  var map = new Map(center);\n};\n\nvar sendOriginRequest = function() {\n  var url_origin = \"http://partners.api.skyscanner.net/apiservices/autosuggest/v1.0/GB/GBP/en-GB?query=\" + origin + \"&apiKey=co666659065635714271429118382522\";\n\n  var req_origin = new XMLHttpRequest();\n  req_origin.open(\"GET\", url_origin);\n  req_origin.send(null);\n\n  req_origin.onload = function() {\n    var res_origin = JSON.parse(req_origin.responseText);\n    ss_origin = res_origin.Places[0].CityId.substring(0, 3);\n    sendDestinationRequest();\n  }\n}\n\nvar sendDestinationRequest = function() {\n  var url_destination = \"http://partners.api.skyscanner.net/apiservices/autosuggest/v1.0/GB/GBP/en-GB?query=\" + destination + \"&apiKey=co666659065635714271429118382522\";\n\n  var req_destination = new XMLHttpRequest();\n  req_destination.open(\"GET\", url_destination);\n  req_destination.send(null);\n\n  req_destination.onload = function(){\n    var res_destination = JSON.parse(req_destination.responseText);\n    ss_destination = res_destination.Places[0].CityId.substring(0, 3)\n    console.log(ss_destination);\n    sendSearchRequests();\n  }\n}\n\nvar sendSearchRequests = function() {\n  var url_ss = \"http://partners.api.skyscanner.net/apiservices/browsedates/v1.0/GB/GBP/en-GB/\" + ss_origin + \"/\" + ss_destination + \"/\" + startDate + \"/\" + endDate + \"?apiKey=co666659065635714271429118382522\";\n\n  var url_exp = \"http://terminal2.expedia.com/x/mhotels/search?city=\" + destination + \"&checkInDate=\" + startDate + \"&checkOutDate=\" + endDate + \"&room1=\" + noRoomsValue + \"&resultsPerPage=-1&apikey=fZPSPARW8ZW6Yg738AzbASiN8VPFwVos\";\n\n  var req_ss = new XMLHttpRequest();\n  req_ss.open(\"GET\", url_ss);\n  req_ss.send(null);\n  req_ss.onload = function(){\n    res_ss = JSON.parse(req_ss.responseText);\n    console.log(res_ss);\n  }\n\n  var req_exp = new XMLHttpRequest();\n  req_exp.open(\"GET\", url_exp);\n  req_exp.send(null);\n  req_exp.onload = function(){\n    res_exp = JSON.parse(req_exp.responseText);\n    console.log(res_exp);\n    displayFlightResults();\n    displayHotelResults();\n  }\n}\n\n\n\n\n\nvar displayFlightResults = function() {\n  var displayFlightsArray = createDisplayHandles(5, \"flight\");\n\n  for (var i = 0; i < displayFlightsArray.length; i++) {\n    if (res_ss.Quotes[i]) { // if there is a valid quote then print it\n      // but only if the trip has an inbound and outbound journey\n      if (res_ss.Quotes[i].InboundLeg && res_ss.Quotes[i].OutboundLeg) {\n        var airlineID = res_ss.Quotes[i].InboundLeg.CarrierIds[0];\n        var airlineName = getAirlineName(airlineID);\n\n        var flightResultDetails = {\"price\": res_ss.Quotes[i].MinPrice, \"direct\": res_ss.Quotes[i].Direct, \"outboundDate\": res_ss.Dates.OutboundDates[0].PartialDate, \"inboundDate\": res_ss.Dates.InboundDates[0].PartialDate, \"airline\": airlineName}\n        addFlightResultToPage(flightResultDetails, displayFlightsArray, i);\n      } else {\n        continue;\n      }\n      }\n  }\n}\n\n// gets a handle on the divs used to display the flight and hotel results\nvar createDisplayHandles = function(size, type) {\n  var resultsArray = [];\n  // these are global so not overwritten on each click\n  userSelectedFlights = [];\n  userSelectedHotels = [];\n\n  for (var i = 0; i < size; i++) {\n    if (type === \"flight\") {\n      resultsArray[i] = document.getElementById('flight-result' + (i + 1));\n      resultsArray[i].onclick=function(e){ selectedItem(e) };\n      // NEED TO STOP THIS REGISTERING CLICK WHEN CHILD ELEMENTS ARE CLICKED\n    } else {\n      resultsArray[i] = document.getElementById('hotel-result' + (i + 1));\n      resultsArray[i].onclick=function(e){ selectedItem(e) };\n    }\n  }\n  return resultsArray;\n}\n\n// returns the airline name, given the airline ID\nvar getAirlineName = function(airlineID) {\n  var airlinesArray = res_ss.Carriers;\n  for (var i in airlinesArray) {\n    if (airlineID === airlinesArray[i].CarrierId) {\n      return airlinesArray[i].Name;\n    }\n  }\n}\n\nvar addFlightResultToPage = function(flight, results, index) {\n  results[index].innerHTML += \"<p><b>\" + flight.airline + \"</b></p>\";\n  results[index].innerHTML += \"<p>\" + \"Â£\" + flight.price + \"</p>\";\n  if (flight.direct) {\n    results[index].innerHTML += \"<p>\" + \"Direct flight\" + \"</p>\";\n  } else {\n    results[index].innerHTML += \"<p>\" + \"Indirect flight\" + \"</p>\";\n  }\n  results[index].innerHTML += \"<p>\" + \"Departure date: \" + flight.outboundDate + \"</p>\";\n  results[index].innerHTML += \"<p>\" + \"Return date: \" + flight.inboundDate + \"</p>\";\n}\n\nvar displayHotelResults = function() {\n  var displayHotelsArray = createDisplayHandles(10);\n\n  for (var i = 0; i < displayHotelsArray.length; i++) {\n    if (res_exp.hotelList[i]) { // if there is a valid quote then print it\n        var hotelImageURL = res_exp.hotelList[i].largeThumbnailUrl;\n        var hotelImage = \"http://images.travelnow.com\" + hotelImageURL\n\n        var hotelResultDetails = {\"name\": res_exp.hotelList[i].name, \"description\": res_exp.hotelList[i].shortDescription, \"image\": hotelImage, \"guestRating\": res_exp.hotelList[i].hotelGuestRating, \"starRating\": res_exp.hotelList[i].hotelStarRating, \"lat\": res_exp.hotelList[i].latitude, \"long\": res_exp.hotelList[i].longitude}\n        addHotelResultToPage(hotelResultDetails, displayHotelsArray, i);\n      }\n  }\n}\n\nvar addHotelResultToPage = function(hotel, results, index) {\n  results[index].innerHTML += \"<p><b>\" + hotel.name + \"</b></p>\";\n  results[index].innerHTML += \"<img src=\" + hotel.image + \">\";\n  results[index].innerHTML += \"<p>\" + hotel.description + \"</p>\";\n  results[index].innerHTML += \"<p>\" + \"Guest rating: \" + hotel.guestRating + \"</p>\";\n  results[index].innerHTML += \"<p>\" + \"Star rating: \" + hotel.starRating + \"</p>\";\n}\n\nvar selectedItem = function(e) {\n  if (String(e.target.id).substring(0,6) === \"flight\") {\n    userSelectedFlights.push(e.target.innerHTML);\n  } else if (String(e.target.id.parentNode).substring(0,6) === \"flight\") {\n    userSelectedHotels.push(e.target.parentNode.innerHTML);\n  } else if (String(e.target.id).substring(0,5) === \"hotel\") {\n    userSelectedHotels.push(e.target.innerHTML);\n  } else if (String(e.target.id.parentNode).substring(0,5) === \"hotel\") {\n    userSelectedHotels.push(e.target.parentNode.innerHTML);\n  }\n\n  // if a flight and a hotel are both selected then add a button\n  if (userSelectedFlights.length !== 0 && userSelectedHotels.length !== 0) {\n    var addOptionsDiv = document.getElementById('add-selected-button');\n    var addOptionsButton = document.createElement('button');\n    addOptionsDiv.appendChild(addOptionsButton);\n\n    // need to add on click to button\n    // when clicked the selected items should be displayed in a div\n  }\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/index.js\n ** module id = 0\n ** module chunks = 0\n **/","var Map = function(latlng){\n  this.map = new google.maps.Map(document.getElementById('map'),{\n    center: latlng,\n    zoom: 14\n  })\n}\n\nmodule.exports = Map;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/map.js\n ** module id = 1\n ** module chunks = 0\n **/"],"sourceRoot":""}