{"version":3,"sources":["webpack:///webpack/bootstrap 75aaa4a512534f0c985b","webpack:///./src/index.js","webpack:///./src/place.js","webpack:///./src/saved_search/saved_search.js","webpack:///./src/map.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,6BAA6B;AAC1C;AACA;AACA;AACA,mBAAkB,cAAc;AAChC;;AAEA;AACA;AACA,O;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA,iBAAgB;AAChB;;AAEA;AACA;AACA;AACA,wBAAuB;AACvB;AACA;AACA,SAAQ;AACR;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAiB,qBAAqB;AACtC;AACA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAiB,oBAAoB;AACrC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,uBAAsB,2BAA2B;AACjD;AACA;AACA;AACA;;AAEA;AACA;AACA,sD;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAiB,gCAAgC;AACjD,4BAA2B;AAC3B;AACA;;AAEA;AACA;;AAEA,oCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,kBAAiB,UAAU;AAC3B;AACA;AACA,iDAAgD;AAChD;AACA,MAAK;AACL;AACA,iDAAgD;AAChD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,kBAAiB,+BAA+B;AAChD,gCAA+B;AAC/B;AACA;;AAEA;AACA;AACA;;AAEA;AACA,qCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,kCAAiC;;AAEjC;;AAEA,qBAAoB,sBAAsB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK,E;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAqB;AACrB;AACA,OAAM;AACN;;AAEA;AACA;AACA,+B;;;;;;ACpdA;AACA,mBAAkB;AAClB;AACA;AACA;AACA,GAAE;AACF;;;AAGA;;AAEA;AACA,mBAAkB,mBAAmB;AACrC;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,aAAY,sBAAsB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B,cAAc;AAC3C;AACA;AACA,IAAG;AACH;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAgB,yBAAyB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,aAAa;AAC5B;AACA,K;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA,wB;;;;;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,8B;;;;;;AC9BA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA,sB","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 75aaa4a512534f0c985b\n **/","var Place = require('./place');\n\nvar SavedSearch = require('./saved_search/saved_search');\nvar Map = require('./map');\nvar Place = require('./place');\n\n//not added iains stuff to state\nvar state = {\n  'flightsSelect': [],\n  \"selectedFlight\": [],\n  // \"selectedFlight\":[],\n  \"hotelsSelect\": [],\n  \"selectedHotel\": [],\n  \"savedSearch\": [],\n  \"latLng\": [],\n  \"resultsArray\": [],\n  \"origin\": [],\n  \"destination\": []\n}\n\nwindow.onload = function(){\n  var request = new XMLHttpRequest();\n   request.open(\"GET\", '/savedsearches');\n   request.setRequestHeader(\"Content-Type\", \"application/json\");\n   console.log(request);\n   request.onload = function(){\n     if(request.status === 200){\n       var searches = JSON.parse(request.responseText)\n     }\n     console.log(searches);\n   }\n   request.send(null);\n\n  var button = document.getElementById('button');\n  var packageButton = document.getElementById('package-button');\n  button.onclick = function(){\n    clearPreviousSearch();\n    origin = document.getElementById('origin').value;\n    state.origin.push(origin);\n    destination = document.getElementById('destination').value;\n    state.destination.push(destination);\n    startDate = document.getElementById('start-date').value;\n    endDate = document.getElementById('end-date').value;\n    noRooms = document.getElementById('no-rooms');\n    budget = document.getElementById('range').innerHTML;\n    noRoomsValue = noRooms.options[noRooms.selectedIndex].text;\n    sendOriginRequest();\n    var place = new Place();\n    place.populate(destination);\n    dest=[]\n    arr=[]\n    setTimeout(function(){\n     for(i=0; i<state.hotelsSelect.length;i++){\n        arr.push(state.hotelsSelect[i].name);\n        arr.push(parseFloat(state.hotelsSelect[i].latitude));\n        arr.push(parseFloat(state.hotelsSelect[i].longitude));\n        arr.push({type: 'hotel'})\n        arr.push(state.hotelsSelect[i].shortDescription)\n       \n        dest.push(arr)\n        arr=[]\n     }  \n     populatehotel(dest)\n    },10000);\n    function populatehotel(arr){\n      place.initMap(dest)\n    }\n  }\n\n  packageButton.onclick = function(){\n    if (state.selectedFlight.length === 0 || state.selectedHotel.length === 0) {\n      alert(\"You haven't selected a valid flight and hotel. Please try again.\");\n    } else {\n      console.log(\"going to save to saved search\");\n      console.log(state.selectedFlight[0]);\n      console.log(state.selectedHotel[0]);\n      displaySavedSearch();\n\n      // NEED TO SAVE TO DB\n    }\n  }\n\n\n  var center = {lat: 55.9533, lng: -3.1883};\n  var map = new Map(center);\n\n  // this.setMapCenter = function(){\n  //   this.setInfoDisplay(\"block\");\n  //   navigator.geolocation.getCurrentPosition(function(position) {\n  //     var center = {lat: position.coords.latitude, lng: position.coords.longitude};\n  //     this.map.map.setCenter(center);\n  //     this.setInfoDisplay(\"none\");\n  //   }.bind(this));\n  // }\n\n};\n\n\n\nvar clearPreviousSearch = function() {\n  state.flightsSelect = [];\n  state.selectedFlight = [];\n  state.hotelsSelect = [];\n  state.selectedHotel = [];\n  state.savedSearch = [];\n  state.latLng = [];\n  state.resultsArray = [];\n  clearFlightDivs();\n  clearHotelDivs();\n  clearPreviousSelection();\n}\n\nvar clearFlightDivs = function() {\n  var numberOfFlights = 5;\n  var localResultsArray = [];\n\n  for (var i = 0; i < numberOfFlights; i++) {\n    localResultsArray[i] = document.getElementById('flight-result' + (i)).innerHTML = \"\";\n  }\n}\n\nvar clearHotelDivs = function() {\n  var numberOfHotels = 10;\n  var localResultsArray = [];\n\n  for (var i = 0; i < numberOfHotels; i++) {\n    localResultsArray[i] = document.getElementById('hotel-result' + (i)).innerHTML = \"\";\n  }\n}\n\nvar clearPreviousSelection = function() {\n  var userSelection = document.getElementById('saved').innerHTML = \"\";\n}\n\nvar sendOriginRequest = function() {\n  var url_origin = \"http://partners.api.skyscanner.net/apiservices/autosuggest/v1.0/GB/GBP/en-GB?query=\" + origin + \"&apiKey=co666659065635714271429118382522\";\n\n  var req_origin = new XMLHttpRequest();\n  req_origin.open(\"GET\", url_origin);\n  req_origin.send(null);\n\n  req_origin.onload = function() {\n    var res_origin = JSON.parse(req_origin.responseText);\n    ss_origin = res_origin.Places[0].CityId.substring(0, 3);\n    sendDestinationRequest();\n  }\n}\n\nvar sendDestinationRequest = function() {\n  var url_destination = \"http://partners.api.skyscanner.net/apiservices/autosuggest/v1.0/GB/GBP/en-GB?query=\" + destination + \"&apiKey=co666659065635714271429118382522\";\n\n  var req_destination = new XMLHttpRequest();\n  req_destination.open(\"GET\", url_destination);\n  req_destination.send(null);\n\n  req_destination.onload = function(){\n    var res_destination = JSON.parse(req_destination.responseText);\n    ss_destination = res_destination.Places[0].CityId.substring(0, 3)\n    sendSearchRequests();\n  }\n}\n\nvar sendSearchRequests = function() {\n  var url_ss = \"http://partners.api.skyscanner.net/apiservices/browsedates/v1.0/GB/GBP/en-GB/\" + ss_origin + \"/\" + ss_destination + \"/\" + startDate + \"/\" + endDate + \"?apiKey=co666659065635714271429118382522\";\n\n  var url_exp = \"http://terminal2.expedia.com/x/mhotels/search?city=\" + destination + \"&checkInDate=\" + startDate + \"&checkOutDate=\" + endDate + \"&room1=\" + 2 + \"&resultsPerPage=-1&apikey=fZPSPARW8ZW6Yg738AzbASiN8VPFwVos\";\n\n  var req_ss = new XMLHttpRequest();\n  req_ss.open(\"GET\", url_ss);\n  req_ss.send(null);\n  req_ss.onload = function(){\n    res_ss = JSON.parse(req_ss.responseText);\n  }\n\n  var req_exp = new XMLHttpRequest();\n  req_exp.open(\"GET\", url_exp);\n  req_exp.send(null);\n  req_exp.onload = function(){\n\n    res_exp = JSON.parse(req_exp.responseText);\n    var hotelListArray = res_exp.hotelList;\n\n    // console.log(hotelListArray);\n    // for (var i = 0; i < hotelListArray.length; i++) {\n    //   if (hotelListArray[i].lowRateInfo === undefined) {\n    //     console.log(\"this is undefined\");\n    //   }\n    // }\n\n   //  console.log(\"hotelListArray\", hotelListArray);\n   var sorted_hotels = hotelListArray.sort(function(a, b){\n    return a.lowRateInfo.total - b.lowRateInfo.total;     \n  })\n\n   loadCharts();\n   displayFlightResults();\n   displayHotelResults();\n }\n}\n\nvar displayFlightResults = function() {\n  var displayFlightsArray = createDisplayHandles(5, \"flight\");\n  var index = 0;\n\n  for (var i = 0; i < displayFlightsArray.length; i++) {\n    if (res_ss.Quotes[i]) { // if there is a valid quote then print it\n      // but only if the trip has an inbound and outbound journey\n      if (res_ss.Quotes[i].InboundLeg && res_ss.Quotes[i].OutboundLeg) {\n\n        var airlineID = res_ss.Quotes[i].InboundLeg.CarrierIds[0];\n        var airlineName = getAirlineName(airlineID);\n\n        var flightResultDetails = {\"price\": res_ss.Quotes[i].MinPrice, \"direct\": res_ss.Quotes[i].Direct, \"outboundDate\": res_ss.Dates.OutboundDates[0].PartialDate, \"inboundDate\": res_ss.Dates.InboundDates[0].PartialDate, \"airline\": airlineName}\n        addFlightResultToPage(flightResultDetails, displayFlightsArray, index);\n        // console.log(\"The index here is\", index, \".....\");\n        state.flightsSelect.push(flightResultDetails);\n        // console.log(\"flight select here:\", state.flightsSelect);\n        index += 1;\n      } else {\n        continue;\n      }\n    }\n  }\n}\n\n// gets a handle on the divs used to display the flight and hotel results\nvar createDisplayHandles = function(size, type) {\n\n  for (var i = 0; i < size; i++) {\n    if (type === \"flight\") {\n      state.resultsArray[i] = document.getElementById('flight-result' + (i));\n      state.resultsArray[i].onclick=function(e){ selectedItem(e) };\n      // NEED TO STOP THIS REGISTERING CLICK WHEN CHILD ELEMENTS ARE CLICKED\n    } else {\n      state.resultsArray[i] = document.getElementById('hotel-result' + (i));\n      state.resultsArray[i].onclick=function(e){ selectedItem(e) };\n    }\n  }\n  // console.log(\"resultsArray:\", state.resultsArray);\n  return state.resultsArray;\n}\n\n// returns the airline name, given the airline ID\nvar getAirlineName = function(airlineID) {\n  var airlinesArray = res_ss.Carriers;\n  for (var i in airlinesArray) {\n    if (airlineID === airlinesArray[i].CarrierId) {\n      return airlinesArray[i].Name;\n    }\n  }\n}\n\nvar addFlightResultToPage = function(flight, results, index) {\n  // console.log(\"im adding this to div\", index);\n  results[index].innerHTML += \"<p><b>\" + flight.airline + \"</b></p>\";\n  results[index].innerHTML += \"<p>\" + \"£\" + flight.price + \"</p>\";\n  if (flight.direct) {\n    results[index].innerHTML += \"<p>\" + \"Direct flight\" + \"</p>\";\n  } else {\n    results[index].innerHTML += \"<p>\" + \"Indirect flight\" + \"</p>\";\n  }\n  results[index].innerHTML += \"<p>\" + \"Departure date: \" + flight.outboundDate + \"</p>\";\n  results[index].innerHTML += \"<p>\" + \"Return date: \" + flight.inboundDate + \"</p>\";\n}\n\nvar displayHotelResults = function() {\n  var displayHotelsArray = createDisplayHandles(10);\n\n  for (var i = 0; i < displayHotelsArray.length; i++) {\n    if (res_exp.hotelList[i]) { // if there is a valid quote then print it\n      var hotelImageURL = res_exp.hotelList[i].largeThumbnailUrl;\n      var hotelImage = \"http://images.travelnow.com\" + hotelImageURL\n\n        // NEED TO UPDATE THIS BASED ON USER BUDGET\n        var hotel = res_exp.hotelList[i];\n        // console.log(\"hotel list\", hotel);\n\n        if(hotel.lowRateInfo.averageRate < parseInt(budget)){\n          var hotelResultDetails = {\"name\": res_exp.hotelList[i].name, \"description\": res_exp.hotelList[i].shortDescription, \"image\": hotelImage, \"guestRating\": res_exp.hotelList[i].hotelGuestRating, \"starRating\": res_exp.hotelList[i].hotelStarRating, \"lat\": res_exp.hotelList[i].latitude, \"long\": res_exp.hotelList[i].longitude, \"price\": res_exp.hotelList[i].lowRateInfo.total}\n          state.hotelsSelect.push(hotel);\n          // console.log(state.hotelsSelect);\n          console.log(state.hotelsSelect);\n          console.log(\"BUDGET\", typeof budget);\n          addHotelResultToPage(hotelResultDetails, displayHotelsArray, i);\n        }\n      }\n    }\n  }\n\n  var addHotelResultToPage = function(hotel, results, index) {\n    results[index].innerHTML += \"<p><b>\" + hotel.name + \"</b></p>\";\n    results[index].innerHTML += \"<p>\" + \"Cost Per Room (Based on 2 people sharing): £\" + hotel.price + \"</p>\";\n    results[index].innerHTML += \"<img src=\" + hotel.image + \">\";\n    results[index].innerHTML += \"<p>\" + hotel.description + \"</p>\";\n    results[index].innerHTML += \"<p>\" + \"Guest rating: \" + hotel.guestRating + \"</p>\";\n    results[index].innerHTML += \"<p>\" + \"Star rating: \" + hotel.starRating + \"</p>\";\n  }\n\n// NEW STUFF\nvar loadCharts = function() {\n  priceBracketData = [];\n  // priceByProximityData = [];\n  var hotelData = res_exp;\n\n  var hotelPriceOptions = hotelData.priceOptions;\n  hotelPriceOptions.splice(-1,1); // remove last item from array\n\n  // var eachHotel = hotelData.hotelList;\n\n  // for (var i = 0; i < eachHotel.length; i++) {\n  //   var distance = eachHotel[i].proximityDistanceInMiles;\n  //   var count = 0;\n  //   if (distance < 1) {\n  //     count += 1;\n  //   }\n  //   console.log(count);\n  //   var cost = eachHotel[i].lowRateInfo.maxNightlyRate;\n    // var starRating = eachHotel[i].hotelStarRating;\n\n    hotelPriceOptions.forEach(function(priceRange) {\n      priceBracketData.push({\n        name: \"£\" + priceRange.minPrice + \" - £\" + priceRange.maxPrice,\n        y: priceRange.count\n      });\n    }); \n\n    new PieChart(\"Hotels by Price Range\", priceBracketData);\n  // new LineChart(\"Hotel Price by Proximity\", priceByProximityData);\n}\n// NEW STUFF\n\n//constructs and displays saved search object\nvar displaySavedSearch = function(event){\n  var saved = new SavedSearch(state.selectedFlight[0], state.selectedHotel[0], state.origin[0], state.destination[0], noRoomsValue);\n  saved.saveToDb();\n  // console.log(\"SAVED\", saved);\n  var savedResult = document.getElementById('saved');\n  savedResult.innerHTML = \"\";\n  \n  // new stuff\n  // need to clear this on next submit\n  var from = document.getElementById('from');\n  var to = document.getElementById('to');\n  var departureDate = document.getElementById('departure-date');\n  var arrivalDate = document.getElementById('arrival-date');\n  var numPeople = document.getElementById('num-people');\n  var airline = document.getElementById('airline');\n  var flightCost = document.getElementById('flight-cost');\n  var hotelName = document.getElementById('hotel');\n  var starRating = document.getElementById('star-rating');\n  var numRooms = document.getElementById('num-rooms');\n  var costPerRoom = document.getElementById('cost-per-room');\n  var flightSubtotal = document.getElementById('flight-subtotal');\n  var hotelSubtotal = document.getElementById('hotel-subtotal');\n  var totalCost = document.getElementById('total-cost');\n  var flightSubtotalFull = document.getElementById('flight-subtotal-full');\n  var hotelSubtotalFull = document.getElementById('hotel-subtotal-full');\n\n  var numberRooms = 0;\n  if (saved.numPeople == 1 || saved.numPeople == 2) {\n    numberRooms = 1;\n  } else if (saved.numPeople == 3 || saved.numPeople == 4) {\n    numberRooms = 2;\n  } else {\n    numberRooms = 3;\n  }\n\n  from.innerHTML = saved.origin;\n  to.innerHTML = saved.destination;\n  departureDate.innerHTML = saved.flightDepDate;\n  arrivalDate.innerHTML = saved.flightRetDate;\n  numPeople.innerHTML = saved.numPeople;\n  airline.innerHTML = saved.flightCarrier;\n  flightCost.innerHTML = \"£\" + saved.flightPrice.toFixed(2);\n  hotelName.innerHTML = saved.hotelName;\n  starRating.innerHTML = saved.starRating;\n  numRooms.innerHTML = numberRooms;\n  costPerRoom.innerHTML = \"£\" + saved.hotelPrice;\n  flightSubtotalFull.innerHTML = saved.numPeople + \" x \" + saved.flightPrice.toFixed(2);\n  flightSubtotal.innerHTML = \"£\" + (saved.flightPrice * saved.numPeople).toFixed(2);\n  hotelSubtotal.innerHTML = \"£\" + (saved.hotelPrice * numberRooms).toFixed(2);\n  hotelSubtotalFull.innerHTML = numberRooms + \" x \" + saved.hotelPrice;\n  totalCost.innerHTML = \"£\" + ((saved.flightPrice * saved.numPeople) + (saved.hotelPrice * numberRooms)).toFixed(2);\n\n  // new stuff\n\n  // var carrier = document.createElement('p');\n  // var flightPrice = document.createElement('p');\n  // var hotelName = document.createElement('p');\n  // var hotelPrice = document.createElement('p');\n  // var totalPrice = document.createElement('p');\n  // var starRating = document.createElement('p');\n  // var numberPeople = document.createElement('p');\n\n  // carrier.innerText = \"Airline : \" + saved.flightCarrier;\n  // hotelName.innerText = \"Hotel : \" + saved.hotelName;\n  // numberPeople.innerText = \"Number of People : \" + saved.numPeople;\n  // flightPrice.innerText = \"Flight Cost Per Person : £\" + Math.floor(saved.flightPrice);\n\n\n\n  // console.log(\"numPeople\", saved.numPeople);\n  // hotelPrice.innerText = \"Accomodation Cost Per Room (2 people) : £\" + Math.floor(saved.hotelPrice);\n  // starRating.innerHTML = \"Hotel Star Rating : \" + saved.starRating;\n  // var totalCost = Math.floor(saved.flightPrice * saved.numPeople) + Math.floor(saved.hotelPrice * numberRooms);\n  // totalPrice.innerHTML = \"Total Package Cost : £\" + Math.floor(totalCost);\n\n  // savedResult.appendChild(carrier);\n  // savedResult.appendChild(hotelName);\n  // savedResult.appendChild(starRating);\n  // savedResult.appendChild(numberPeople);\n  // savedResult.appendChild(flightPrice);\n  // savedResult.appendChild(hotelPrice);\n  // savedResult.appendChild(totalPrice);\n};\n\nvar selectedItem = function(e) {\n  console.log(e);\n  var childElement = String(e.target.id);\n  var parentElement = String(e.target.parentNode.id);\n\n  if (childElement.substring(0,6) === \"flight\") {\n    state.selectedFlight = [];\n    selectedIndex = childElement.substring(13,14);\n    // console.log(\"the slected index:\", state.flightsSelect);\n    state.selectedFlight.push(state.flightsSelect[selectedIndex]);\n    // console.log(\"123\", state.flightsSelect[selectedIndex]);\n  } else if (parentElement.substring(0,6) === \"flight\") {\n    state.selectedFlight = [];\n    selectedIndex = parentElement.substring(13,14);\n    state.selectedFlight.push(state.flightsSelect[selectedIndex]);\n  } else if (childElement.substring(0,5) === \"hotel\") {\n    state.selectedHotel = [];\n    console.log(\"should empty hotel here\");\n    console.log(\"selected hotel\", state.selectedHotel);\n    selectedIndex = childElement.substring(12,13);\n    state.selectedHotel.push(state.hotelsSelect[selectedIndex]);\n    console.log(\"the index is\", selectedIndex);\n    console.log(\"child\", childElement);\n    console.log(\"parent\", parentElement);\n    console.log(\"the hotel pushed is\", state.hotelsSelect[selectedIndex]);\n  } else if (parentElement.substring(0,5) === \"hotel\") {\n    state.selectedHotel = [];\n    console.log(\"should empty hotel here\");\n    console.log(\"selected hotel\", state.selectedHotel);\n    selectedIndex = parentElement.substring(12,13);\n    state.selectedHotel.push(state.hotelsSelect[selectedIndex]);\n    console.log(\"the index is\", selectedIndex);\n    console.log(\"child\", childElement);\n    console.log(\"parent\", parentElement);\n    console.log(\"the hotel pushed is\", state.hotelsSelect[selectedIndex]);\n  }\n}\n\n// TO DO LIST:\n// 2. save the users options to db\n// 3. add functionality which enables user to retrieve their previous selections (including the date of the search)\n// 5. add geolocation so that the initial map defaults to the users location\n\n// this.setMapCenter = function(){\n//   navigator.geolocation.getCurrentPosition(function(position) {\n//     var center = {lat: position.coords.latitude, lng: position.coords.longitude};\n//     this.map.map.setCenter(center);\n//   }.bind(this));\n// }\n\n// 6. update the map with points of interest for the chosen destination - display this map as soon as the user enters their chosen options - maybe have POI in blue markers and hotels in red markers\n// 7. style the website - need to add a coloured border around the options that the user selects\n// 8. tidy up some of the code\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/index.js\n ** module id = 0\n ** module chunks = 0\n **/","var Place = function(){\n  var myLatLng = {lat: 55.9533, lng: -3.1883};\n  this.map = new google.maps.Map(document.getElementById('map'), {\n   zoom: 4,\n   center: myLatLng\n })\n}\n\n\nPlace.prototype = {\n\n  initMap: function(locations) {\n   for (var i = 0;i<locations.length; i++) {\n    if(locations[i][3].type==='trip'){\n      icon = \"http://maps.google.com/mapfiles/ms/icons/blue-dot.png\"\n    }else if (locations[i][3].type==='hotel') {\n     icon = \"http://maps.google.com/mapfiles/ms/icons/green-dot.png\"\n   }\n }\n infowindow = new google.maps.InfoWindow();\n var bounds = new google.maps.LatLngBounds();\n for (i = 0; i < locations.length; i++){\n  var marker = new google.maps.Marker({\n    position: new google.maps.LatLng(parseFloat(locations[i][1]), parseFloat(locations[i][2])),\n    map: this.map,\n    title: locations[i][0],\n    animation: google.maps.Animation.DROP,\n    icon: new google.maps.MarkerImage(icon)\n  });\n  \n    // marker.setIcon('http://maps.google.com/mapfiles/ms/icons/green-dot.png');\n    bounds.extend(marker.position);\n    this.map.fitBounds(bounds);\n    google.maps.event.addListener(marker, 'click',(function(marker,i){\n     return function(){\n      infowindow.setContent(locations[i][0]);\n      infowindow.setOptions({maxWidth: 200});\n      infowindow.open(map, marker)\n    }\n  })(marker,i));\n    // Markers[locations[i][4]] = marker;\n  }\n},\n\npopulate : function(destination){\n var url = \"http://terminal2.expedia.com/x/activities/search?location=\" + destination + \"&apikey=fZPSPARW8ZW6Yg738AzbASiN8VPFwVos\";\n var request = new XMLHttpRequest();\n request.open(\"GET\", url);\n request.onload = function(){\n   var jsonString = request.responseText;\n   var info = JSON.parse(jsonString);\n\n   var location=[]\n   var arr=[]\n   for (var i=0;i<info.activities.length;i++){\n     var coor = info.activities[i].latLng.split(',')\n     var lat = parseFloat(coor[0])\n     var lang = parseFloat(coor[1])\n     arr=[]\n     arr.push(info.activities[i].title)\n     arr.push(lat)\n     arr.push(lang)\n     arr.push({type: 'trip'})\n     location.push(arr)\n   }     \n   this.initMap(location);\n }.bind(this);\n\n request.send(null);\n}\n}\n\nmodule.exports = Place;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/place.js\n ** module id = 1\n ** module chunks = 0\n **/","var SavedSearch = function(ssObj, expObj, origin, dest, numPeople){\n this.flightDepDate = ssObj.outboundDate,\n this.flightRetDate = ssObj.inboundDate,\n this.flightCarrier = ssObj.airline,\n this.flightPrice = ssObj.price,\n this.hotelName =  expObj.localizedName,\n this.starRating = expObj.hotelStarRating,\n this.hotelPrice = expObj.lowRateInfo.total,\n this.origin = origin,\n this.destination = destination,\n this.numPeople = numPeople\n};\n\nSavedSearch.prototype = {\n saveToDb: function(){\n    // function to save search to database\n    // AJAX POST to /savedSearches\n    //request.send(savedObject)\n    var request = new XMLHttpRequest();\n    request.open(\"POST\", '/savedsearches');\n    request.setRequestHeader(\"Content-Type\", \"application/json\");\n    console.log(request);\n    request.onload = function(){\n       if(request.status === 200){\n       }\n    }\n    request.send(JSON.stringify(this));\n }\n}\n\nmodule.exports = SavedSearch;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/saved_search/saved_search.js\n ** module id = 2\n ** module chunks = 0\n **/","var Map = function(latlng){\n  this.map = new google.maps.Map(document.getElementById('map'),{\n    center: latlng,\n    zoom: 14\n  })\n}\n\nmodule.exports = Map;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/map.js\n ** module id = 3\n ** module chunks = 0\n **/"],"sourceRoot":""}